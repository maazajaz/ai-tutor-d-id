<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environment Debug</title>
    <style>
        body { 
            font-family: monospace; 
            background: #000; 
            color: #0f0; 
            padding: 20px; 
            line-height: 1.6;
        }
        .section { 
            margin-bottom: 30px; 
            border: 1px solid #333; 
            padding: 15px; 
            border-radius: 5px;
        }
        .good { color: #0f0; }
        .bad { color: #f00; }
        .warning { color: #ff0; }
    </style>
</head>
<body>
    <h1>üîß Environment Debug for Vercel</h1>
    
    <div class="section">
        <h2>Environment Variables</h2>
        <div id="env-vars"></div>
    </div>
    
    <div class="section">
        <h2>Network Test</h2>
        <div id="network-test"></div>
    </div>
    
    <div class="section">
        <h2>D-ID API Test</h2>
        <div id="api-test"></div>
    </div>

    <script>
        // Environment Variables Check
        const envVars = document.getElementById('env-vars');
        
        const checkEnvVar = (name, value) => {
            const status = value ? 
                `<span class="good">‚úÖ ${name}: Present (${value.length} chars, starts with: ${value.substring(0, 10)}...)</span>` :
                `<span class="bad">‚ùå ${name}: Missing</span>`;
            envVars.innerHTML += status + '<br>';
        };
        
        // This won't work in a static HTML file, but will show us the approach
        envVars.innerHTML = '<span class="warning">‚ö†Ô∏è This is a static HTML file. Check browser console for actual environment variable access.</span><br>';
        
        // Console logging for debugging
        console.log('üîß Environment Debug:');
        console.log('User Agent:', navigator.userAgent);
        console.log('Location:', window.location.href);
        console.log('Local Storage:', localStorage.length, 'items');
        console.log('Session Storage:', sessionStorage.length, 'items');
        
        // Network test
        const networkTest = document.getElementById('network-test');
        networkTest.innerHTML = 'Testing connectivity...';
        
        fetch('https://api.d-id.com/')
            .then(response => {
                networkTest.innerHTML = `<span class="good">‚úÖ D-ID API reachable (Status: ${response.status})</span>`;
            })
            .catch(error => {
                networkTest.innerHTML = `<span class="bad">‚ùå D-ID API unreachable: ${error.message}</span>`;
            });
            
        // API Test (this will fail without API key, but will show us the error)
        const apiTest = document.getElementById('api-test');
        apiTest.innerHTML = 'Testing D-ID API...';
        
        fetch('https://api.d-id.com/agents', {
            headers: {
                'Authorization': 'Basic test-key'
            }
        })
        .then(response => response.text())
        .then(data => {
            apiTest.innerHTML = `<span class="warning">‚ö†Ô∏è API Response: ${data.substring(0, 200)}...</span>`;
        })
        .catch(error => {
            apiTest.innerHTML = `<span class="bad">‚ùå API Error: ${error.message}</span>`;
        });
    </script>
</body>
</html>
